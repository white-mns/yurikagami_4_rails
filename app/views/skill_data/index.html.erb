<h1>技情報一覧</h1>

<div class="bs-docs-section">
  <div class="row">
    <div class="col-md-12">
        <p class="formNum">テキストフォームの隣に赤い破線がある項目は数値検索です。<br>
        「/」区切りでOR、「100~」や「100~200」のように「~」をつけて範囲指定となります。<br>
        OR指定と範囲指定を同時に行うことはできません。</p>
        <p class="formText">テキストフォームの隣に青い太線がある項目は文字検索です。<br>
        半角スペース区切りでAND、「/」区切りでOR、単語の前に「-」でNOT、単語の前後に「"」をつけて完全一致が使えます<br>
        ANDとORを組み合わせた時は、ANDで区切った後にORで区切るという順番になります。</p>
        <p><span id="example_open" class="example_select pointer" onclick="example_open(true)">入力例（クリックで開きます）<br></span>
        <span id="example_close" class="example_select pointer" style="display:none;" onclick="example_open(false)">入力例（クリックで閉じます）<br></span>
        <div id="example" style="display:none;">
            <p class="formNum">数値入力で「100/105/110」と入力　→ 入力した項目の数値が100、105、110の結果がヒット<br>
            「100~」で100以上、「~100」で100以下、「-200~100」で-200～-100の範囲指定となります。</p>
            <p class="formText">現在地に「テネルメント」と入力　→　テネルメント、テネルメント城が検索結果にヒット<br>
            現在地に「"テネルメント"」　→　完全一致で「テネルメント」のみ検索結果にヒット<br>
            現在地に「-テネルメント」　→　「テネルメント」の単語を含まない目的が検索結果にヒット<br>
            現在地に「-"テネルメント"」　→　完全一致で「テネルメント」以外が検索結果にヒット<br>
            現在地に「テネルメント -"テネルメント"」　→　「テネルメント」が含まれる単語で完全一致の「テネルメント」以外がヒット。つまり、テネルメント城がヒットします。<br>
            現在地に「プラインカルド城 中庭」　→　「プラインカルド城」と「中庭」の2つの単語が含まれる現在地が検索結果にヒット<br>
            現在地に「プラインカルド城 北側/中庭」　→　「プラインカルド城」が含まれ、さらに「北側」か「中庭」の現在地が検索結果にヒット<br>
            現在地に「-テネルメント -プラインカルド城」　→　「テネルメント」もしくは「プラインカルド」という単語が入った現在地を検索結果から除外</p></div></p>
<%= search_form_for @search do |f| %>
<table id="search_close" class="table table-striped table-bordered table-hover" style="display:none;" onclick="search_open(true);">

  <tbody>
  <tr><td colspan="2" style="cursor:pointer;">絞り込み検索<span style="font-size:80%">(クリックで開きます)</span></td></tr>
  </tbody>
</table>

<table id="search_table" class="table table-striped table-bordered table-hover">

  <tbody>
  <tr><td colspan="2" style="cursor:pointer;" onclick="search_open(false);">絞り込み検索<span style="font-size:80%">(クリックで閉じます)</span></td></tr>
  <tr><td><%= f.label :skill_id_form, 'ID' %></td>
    <td class="formNum"><%= text_field_tag :skill_id_form, @skill_id_form %></td></tr>
  <tr><td><%= f.label :name_form, 'スキル名' %></td>
    <td class="formText"><%= text_field_tag :name_form, @name_form %></td></tr>
  <tr><td><%= f.label :at_form, 'AT' %></td>
    <td class="formNum"><%= text_field_tag :at_form, @at_form %></td></tr>
  <tr><td><%= f.label :ct_form, 'CT' %></td>
    <td class="formNum"><%= text_field_tag :ct_form, @ct_form %></td></tr>
  <tr><td><%= f.label :timing_form, '発動タイミング' %></td>
    <td class="formText"><%= text_field_tag :timing_form, @timing_form %></td></tr>
  <tr><td><%= f.label :mp_form, 'MP' %></td>
    <td class="formNum"><%= text_field_tag :mp_form, @mp_form %></td></tr>
  <tr><td><%= f.label :target_form, '対象' %></td>
    <td class="formText"><%= text_field_tag :target_form, @target_form %></td></tr>
  <tr><td><%= f.label :range_form, '射程' %></td>
    <td class="formNum"><%= text_field_tag :range_form, @range_form %></td></tr>
  <tr><td><%= f.label :property_form, '特性' %></td>
    <td class="formText"><%= text_field_tag :property_form, @property_form %></td></tr>
  <tr><td><%= f.label :element_form, '属性' %></td>
    <td class="formText"><%= text_field_tag :element_form, @element_form %></td></tr>
  <tr><td><%= f.label :text_form, '説明' %></td>
    <td class="formText"><%= text_field_tag :text_form, @text_form %></td></tr>
  <tr><td></td><td>
    <%= f.submit '検索する' %>
    </td></tr>
</tbody>
</table>
 <% end %>
   </div>
  </div>
</div>
<%= paginate(@skill_data) %><br>
ヒット数：<%= @count %>件<br><br>

<div class="bs-docs-section">
  <div class="row">
    <div class="col-lg-12">
<table class="table table-striped table-bordered table-hover">
  <thead>
    <tr>
      <th><%= sort_link(@search, :skill_id, 'ID', default_order: :desc) %></th>
      <th><%= sort_link(@search, :name, 'スキル名', default_order: :desc) %></th>
      <th><%= sort_link(@search, :at, 'AT', default_order: :desc) %></th>
      <th><%= sort_link(@search, :ct, 'CT', default_order: :desc) %></th>
      <th><%= sort_link(@search, :timing, '発動', default_order: :desc) %></th>
      <th><%= sort_link(@search, :mp, 'MP', default_order: :desc) %></th>
      <th><%= sort_link(@search, :target, '対象', default_order: :desc) %></th>
      <th><%= sort_link(@search, :range, '射程', default_order: :desc) %></th>
      <th><%= sort_link(@search, :property, '特性', default_order: :desc) %></th>
      <th><%= sort_link(@search, :element, '属性', default_order: :desc) %></th>
      <th><%= sort_link(@search, :text, '説明', default_order: :desc) %></th>
    </tr>
  </thead>

  <tbody>
    <% @skill_data.each do |skill_datum| %>
      <tr>
        <td><%= skill_datum.skill_id %></td>
        <td><%= skill_datum.name %></td>
        <td><%= skill_datum.at if skill_datum.at && skill_datum.at >= 0 %></td>
        <td><%= skill_datum.ct if skill_datum.ct && skill_datum.ct >= 0 %></td>
        <td><%= skill_datum.timing_name.name if skill_datum.timing_name %></td>
        <td><%= skill_datum.mp %></td>
        <td><%= skill_datum.target_name.name if skill_datum.target_name %></td>
        <td><%= if skill_datum.range == -2 then  "武"
                elsif skill_datum.range == -1 then "-"
                else skill_datum.range
                end%></td>
        <td><%= skill_datum.property_name.name if skill_datum.property_name %></td>
        <td><%= skill_datum.element_name.name if skill_datum.element_name %></td>
        <td><%= skill_datum.text %></td>
      </tr>
    <% end %>
  </tbody>
</table>
    </div>
  </div>
</div>
<%= paginate(@skill_data) %>
